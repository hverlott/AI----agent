# 机器人创建与配置流程

Version: 2.5.1
Last Updated: 2026-01-12

## 1. 功能概述
本模块指导用户如何配置 AI 机器人的核心行为，包括 AI 服务商接入、模型选择、人设 (Persona) 定制以及功能开关。

## 2. 操作步骤

### 2.1 AI 服务商配置 (Global AI Config)
在启动机器人前，需先配置 AI 大脑。
1. 侧边栏选择 **平台** -> **AGNT AI 配置中心**。
2. 配置服务商信息：
    - **服务商**: 选择 OpenAI, Anthropic, Azure 等。
    - **Base URL**: API 接口地址。
    - **API Key**: 填入密钥（系统会自动加密存储）。
    - **模型版本**: 输入模型名称 (e.g., `gpt-4-turbo`).
3. **A/B 测试权重**: 如需灰度测试，可配置两个模型并设置流量权重 (0-100)。

![AI配置中心示意图]

### 2.2 平台机器人配置 (以 Telegram 为例)
1. 侧边栏选择 **平台** -> **Telegram**。
2. 点击顶部 **配置 (Config)** 标签页。
3. 分模块进行配置：
    - **AI 人设**: 编辑 System Prompt，定义机器人性格。
    - **触发关键词**: 设置触发机器人的关键词（每行一个）。
    - **QA 问题库**: 录入固定问答对，优先于 AI 回复。
    - **功能开关**: 开启/关闭私聊或群聊自动回复。
    - **引用设置**: 调整引用回复的长度和频率。
    - **🛡️ 内容过滤 (Content Filter)** (v2.5.2): 
      - 配置敏感关键词与匹配阈值。
      - 当用户消息中关键词密度超过阈值时，自动拦截并不予回复。
      - 支持正则表达式与模糊匹配。
4. 点击各模块下方的 **保存** 按钮生效。

![Telegram配置面板示意图]

### 2.3 知识库挂载
1. 侧边栏选择 **📚 数据管理** -> **知识库**。
2. 导入业务文档（支持 PDF/Word/TXT 等）。
3. 系统会自动对文档切片向量化。
4. 机器人回复时将自动检索相关知识作为上下文。

## 3. 参数说明

### 3.1 AI 配置参数
| 参数 | 说明 | 默认值 |
| :--- | :--- | :--- |
| Temperature | 创造性 (0.0-1.0)，越高越随机 | 0.7 |
| A/B Weight | 模型 A 的流量占比 (0-100) | 100 |

### 3.2 功能开关
| 开关 | 说明 | 建议 |
| :--- | :--- | :--- |
| 私聊自动回复 | 是否接管私聊消息 | 开启 |
| 群聊自动回复 | 是否在群内自动回复 | 视情况开启 (配合白名单) |
| 自动引用 | 回复时是否引用原消息 | 开启 (群聊场景推荐) |

## 4. 常见问题 (FAQ)

*   **Q: 修改配置后需要重启机器人吗？**
    *   A: 大部分配置（如 Prompt、关键词、开关）**即时生效**，无需重启。涉及底层连接（如 API Key 变更）建议重启。
*   **Q: 为什么机器人不回复？**
    *   A: 请检查：
        1. 机器人是否已启动（状态栏显示 🟢 Running）。
        2. "功能开关" 是否开启。
        3. 是否命中了 "违禁词" 被拦截。
*   **Q: 如何让机器人更聪明？**
    *   A: 优化 "AI 人设" (Prompt) 和完善 "知识库" 是最有效的方法。
