# 社交媒体账号管理指南

Version: 2.5.0
Last Updated: 2026-01-12

## 1. 功能概述
账号管理模块用于集中录入、管理和分组不同平台的社交媒体账号（如 Telegram、WhatsApp 等）。支持为账号打标签、设置分组，并支持批量导入 Session 与账号有效性验证。

## 2. 操作步骤

### 2.1 进入账号管理
1. 在左侧侧边栏选择 **平台 (Platform)** -> **账号管理 (Accounts)**。
2. 顶部提供两个选项卡：
    - **👤 社媒账号管理**: 管理具体的登录账号 (Session)。
    - **🤖 社媒机器人API管理**: 管理平台开发者的 API 凭证 (API ID/Hash)。

### 2.2 社媒账号管理 (Tab 1)
该页包含 3 个子标签页：`📝 手动添加` / `📂 批量导入 (Session)` / `📋 账号列表`。

#### 2.2.1 手动添加 / 更新
1. 进入 `📝 手动添加`。
2. 填写字段：
   - **平台**：WeChat / Weibo / Twitter / Telegram / WhatsApp
   - **账号名/ID**：平台唯一标识
   - **分组**：可选，用于运营分组管理
   - **标签**：逗号分隔（如 `vip, english`）
   - **刷新间隔（分钟）**
3. 点击 `添加/更新账号` 保存。

数据落盘：
- `data/tenants/<tenant_id>/accounts.json`

#### 2.2.2 批量导入 (Session)
1. 进入 `📂 批量导入 (Session)`。
2. 设置导入参数：
   - 默认平台（无法识别时使用）
   - 默认分组、默认标签
3. 上传 Session 文件（支持多选）并点击 `开始导入`。
4. 自动识别规则：
   - 文件名以 `.session` 结尾：自动识别为 Telegram 账号
   - 其他文件：使用“默认平台”

数据落盘：
- Session 文件保存到：`data/tenants/<tenant_id>/sessions/<filename>`
- 账号记录写入：`data/tenants/<tenant_id>/accounts.json`

#### 2.2.3 账号列表 / 批量操作
1. 进入 `📋 账号列表` 查看已录入账号及 Session 状态。
2. 勾选账号后可执行：
   - `🔍 验证有效性`：对 Telegram Session 执行授权校验并更新状态
   - `🗑️ 批量删除`：删除账号记录，并尝试删除关联 Session 文件

验证前置条件：
- 需要先在 `🤖 社媒机器人API管理` 中配置并“应用”一套 Telegram API 凭证，否则无法验证 Telegram Session。

### 2.3 社媒机器人API管理 (Tab 2)
**新功能 (v2.5.0)**: 支持多套 API 配置管理，实现不同租户或不同业务线使用独立的 API 凭证。

#### 功能模块
1. **📝 手动添加 API**:
    - **平台**: 目前主要支持 Telegram。
    - **备注名称**: 给配置起个易记的名字 (如 "营销号专用API")。
    - **基础凭证**: 输入 `API ID` 和 `API Hash` (从 my.telegram.org 获取)。
2. **📂 批量导入**: 支持 JSON 格式批量导入 API 配置。
3. **📋 API 列表 (启用/管理)**: 
    - 查看已保存的 API 配置。
    - **启用配置**: 点击配置卡片中的 **"🚀 应用此配置"** 按钮，将其设置为当前租户的生效凭证。
    - **删除**: 可删除不再使用的配置。

> **注意**: 
> 1. API 配置仅包含连接凭证 (ID/Hash/Token)，**不包含 AI 模型配置**。AI 模型请前往 **"🧠 AI 配置中心"** 进行设置。
> 2. 点击 "应用" 后，需前往 **Telegram 平台面板** 重启机器人以使变更生效。

数据落盘：
- API 配置列表：`data/tenants/<tenant_id>/api_configs.json`
- 应用后的租户 Telegram 配置：`data/tenants/<tenant_id>/platforms/telegram/config.json`

## 3. 参数说明

| 参数名称 | 说明 | 必填 | 示例 |
| :--- | :--- | :--- | :--- |
| 平台 (Platform) | 账号所属社交平台 | 是 | Telegram |
| 账号名/ID | 平台唯一标识符 | 是 | @support_bot |
| 分组 (Group) | 业务分组，用于权限或策略隔离 | 否 | Sales_Team_A |
| 标签 (Tags) | 属性标签，用于路由或 AI 上下文 | 否 | high_value, us_market |
| 刷新间隔 | 后台数据同步周期 (分钟) | 是 | 5 |

## 4. 常见问题 (FAQ)

*   **Q: 这里添加账号后，机器人就会自动登录吗？**
    *   A: 不会。此处仅为**资产录入**。实际登录需前往各平台的 "控制面板" (如 Telegram 面板) 进行扫码或 Token 配置。
*   **Q: 标签有什么用？**
    *   A: 标签会被注入到 AI 的 Prompt 中，或用于路由规则。例如打上 `vip` 标签的账号，AI 回复时可能会更正式。
*   **Q: 如何批量导入账号？**
    *   A: 在 `👤 社媒账号管理` -> `📂 批量导入 (Session)` 上传 Session 文件即可批量导入。
